<!DOCTYPE html>
   <head>
      <title>GPIO Control</title>
      <link rel="stylesheet" href='../static/style.css'/>
   </head>
   <body>
		<h1>Actuators</h1>
		<h2> Status </h2>
		<h3> TEMP0 ==>  {{ temp0  }}</h3>
		<br>
		<h2> Commands </h2>
		<h3> 
			RED LED Ctrl ==> 
			<div class="button" onclick="clickButton()">{{ system_state }}</div>  
		</h3>

        <h3> 
			Current pump speed: {{ pump_set }} ==> 
			<div class="button" onclick='setPumpSpeed(20)'> SET </div>  
		</h3>
	
    <script>

        function setPumpSpeed(speed){
            var xmlhttp = new XMLHttpRequest();
            var url = "/setPumpSpeed";
            var data = JSON.stringify({"value":speed});

            xmlhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    var myArr = JSON.parse(this.responseText);
                    console.log("Got response")
                    location.reload();
                }
            };
            xmlhttp.open("POST", url, true);
            xmlhttp.setRequestHeader("Content-Type", "application/json");
            xmlhttp.send(data);
        }

        function clickButton(){
            var xmlhttp = new XMLHttpRequest();
            var url = "/debug";

            xmlhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    var myArr = JSON.parse(this.responseText);
                    console.log("Got response")
                    location.reload();
                }
            };
            xmlhttp.open("GET", url, true);
            xmlhttp.setRequestHeader("Content-Type", "application/json");
            xmlhttp.send();
        }
    
    </script>

   </body>
</html>